<!DOCTYPE html>
<% if (config.enableAppcache) { %>
<html manifest="<%= config.manifest %>?version=<%= config.version%>">
<% } else { %>
<html>
<% } %>
<head>
<meta charset="<%= config.charset %>" />
<meta http-equiv="Content-Type" content="text/html; charset=<%= config.charset %>" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes">
<title><%- config.pageTitle + (config.texts.append_title || '') %></title>
</head>
<body>
<div id="WeedProxiteTip_JUST_MAGIC_BIT">
  <style>
    #WeedProxiteTip_JUST_MAGIC_BIT br {clear:both;float:none;}
    #WeedProxiteTip_JUST_MAGIC_BIT p {
      text-align: center;
    }
    #WeedProxiteTip_JUST_MAGIC_BIT p.warning  {
      font-weight:bold;
      color:red;
      text-align:center;
      line-height:200%;
    }
    #WeedProxiteTip_JUST_MAGIC_BIT .loading {
      margin:12px auto;
      text-align:center;

    }
    #WeedProxiteTip_JUST_MAGIC_BIT .loading img {
      width:64px;
      height:64px;
    }
    #WeedProxiteTip_JUST_MAGIC_BIT ul {
      border: thin solid #ddd;
      margin: auto;
      padding: 8px;
      display: table;
      padding-right: 2em;
      min-width: 300px;
      width: auto;
    }
    #WeedProxiteTip_JUST_MAGIC_BIT ul .comma {
      display:none;
    }
    #WeedProxiteTip_JUST_MAGIC_BIT li {
      margin-left: 50px;
      line-height:140%;
    }
    #WeedProxiteTip_JUST_MAGIC_BIT h1 {
      color: #aaa;
      text-align: center;
    }
    #WeedProxiteTip_JUST_MAGIC_BIT.top {
      color: #222;
      padding: 5px;
      text-align: center;
      background:white;
    }
    #WeedProxiteTip_JUST_MAGIC_BIT.top .loading,
    #WeedProxiteTip_JUST_MAGIC_BIT.top p.warning  {
      display:none;
    }

    #WeedProxiteTip_JUST_MAGIC_BIT.top div * {
      display:inline;
      font-size:12px;
    }
    #WeedProxiteTip_JUST_MAGIC_BIT.top div script {
      display:none;
    }
    #WeedProxiteTip_JUST_MAGIC_BIT.top div .title {
      display:none;
    }
    #WeedProxiteTip_JUST_MAGIC_BIT.top div ul {
      border:none;
      padding:0;
    }
    #WeedProxiteTip_JUST_MAGIC_BIT.top div ul li {
      margin:0;
    }
    #WeedProxiteTip_JUST_MAGIC_BIT.top div ul .comma {
      display:inline;
    }
  </style>
  <div>
    <p class="title"><%= config.texts.loading %></p>
    <h1 class="title"><%- config.pageTitle + (config.texts.append_title || '') %></h1>
    <% if (config.mirrorCollectionLinks) { %>
      <p><%= config.texts.if_website_fails %></p>
      <ul>
        <li>
        <%-
        config.mirrorCollectionLinks.map(function (collection) {
          return '<a href="'+collection +'" target="_blank">' +collection +'</a>'
        }).join('<span class="comma">,</span></li><li>')
        %>
        </li>
      </ul>
    <% } %>

    <p class="warning" id="WeedProxiteTip_JUST_MAGIC_BIT_warning"></p>
    <p class="loading"><img width="64" height="64" src="<%= config.api + 'static/spinner.gif' %>" alt="Page Loading" /></p>
    <br class="clear" />
  </div>
</div>
<%- config.html_body_appendix %>
<% if (config.debug) { %>
  <script src="<%= config.api + 'static/bundle.js' %>"></script>
<% } else { %>
  <script src="<%= config.api + 'static/bundle.min.js' %>"></script>
<% } %>
<script>
  var _config = <%- config.json %>;
  var client = new WeedProxite.Client();
  if (_config.showJiathis && top == self) {
    var jiathisCode = '<script type="text/javascript" src="/http-colon-//v3.jiathis.com/code/jiathis_r.js?move=0&btn=r4.gif" charset="utf-8"><\/script>';
    client.rewriter.replace(/(<body\b[^>]*>)/ig,"$1"+jiathisCode);
  }
  client.run();
</script>


</body>
</html>
